(function(){"use strict";var t={7127:function(t,e,r){var n=r(5130),l=r(6768),a=r(4232);const i={id:"app"},o={class:"input-grid"},s=["for"],u=["id","onUpdate:modelValue","step"],c={class:"button-grid"},h=["value"],d={class:"pagination"},p=["disabled"],g=["disabled"],b={class:"chart-container"};function k(t,e,r,k,f,v){const L=(0,l.g2)("line-chart");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",i,[e[10]||(e[10]=(0,l.Lk)("h1",null,"尘白禁区后勤词条折算总分期望计算器",-1)),e[11]||(e[11]=(0,l.Lk)("hr",null,null,-1)),e[12]||(e[12]=(0,l.Lk)("h2",null,"调整词条权重(0-1)",-1)),(0,l.Lk)("div",o,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(f.weights,((t,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e},[(0,l.Lk)("label",{for:"weight"+(e+1)},(0,a.v_)(f.weightsName[e])+":",9,s),(0,l.bo)((0,l.Lk)("input",{id:"weight"+(e+1),type:"number","onUpdate:modelValue":t=>f.weights[e]=t,step:f.weightsStep[e],min:"0",max:"1"},null,8,u),[[n.Jo,f.weights[e],void 0,{number:!0}]])])))),128))]),(0,l.Lk)("div",c,[(0,l.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>v.calculateAndSort&&v.calculateAndSort(...t))},"计算总分并排序"),(0,l.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>v.clearWeight&&v.clearWeight(...t))},"重置权重"),(0,l.bo)((0,l.Lk)("select",{onChange:e[2]||(e[2]=(...t)=>v.loadPreset&&v.loadPreset(...t)),"onUpdate:modelValue":e[3]||(e[3]=t=>f.selectedPreset=t)},[e[7]||(e[7]=(0,l.Lk)("option",{value:"",disabled:""},"选择预设",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(f.presetOptions,((t,e)=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e},(0,a.v_)(e),9,h)))),128))],544),[[n.u1,f.selectedPreset]]),e[8]||(e[8]=(0,l.Lk)("label",null,"目标成功概率",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>f.ptarget=t),step:.1,min:"0",max:"1"},null,512),[[n.Jo,f.ptarget,void 0,{number:!0}]])]),e[13]||(e[13]=(0,l.Lk)("hr",null,null,-1)),e[14]||(e[14]=(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,"假定词条种类和档位的抽取是等概率完全随机的，不存在保底等特殊机制。"),(0,l.Lk)("li",null,"预设配置仅供参考。实际战斗环境不同或关注的角色不同，折算系数可能发生变化。"),(0,l.Lk)("li",null,"“单次提升概率”表示获得1个后勤时其属性在该档位及以上的概率。"),(0,l.Lk)("li",null,"“期望体力”根据1个后勤100体力，乘以期望次数 (1/p)得到。"),(0,l.Lk)("li",null,"“目标成功概率”表示希望有多少概率能够达成目标，根据 log(1-p成功)/log(1-p) 计算得到表中最后一列。")],-1)),(0,l.Lk)("table",null,[e[9]||(e[9]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"排位"),(0,l.Lk)("th",null,"属性"),(0,l.Lk)("th",null,"折算分"),(0,l.Lk)("th",null,"单次提升概率"),(0,l.Lk)("th",null,"期望体力"),(0,l.Lk)("th",null,"目标概率所需体力")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(v.paginatedObjects,((t,e)=>((0,l.uX)(),(0,l.CE)("tr",{key:e},[(0,l.Lk)("td",null,(0,a.v_)(t.rank),1),(0,l.Lk)("td",null,(0,a.v_)(v.getFilteredAttributes(t).join(", ")),1),(0,l.Lk)("td",null,(0,a.v_)(t.totalScore.toFixed(2)),1),(0,l.Lk)("td",null,(0,a.v_)(t.prob.toFixed(3)),1),(0,l.Lk)("td",null,(0,a.v_)(t.expectres.toFixed(0)),1),(0,l.Lk)("td",null,(0,a.v_)((100*Math.log(1-this.ptarget)/Math.log(1-t.prob)).toFixed(0)),1)])))),128))])])]),(0,l.Lk)("div",d,[(0,l.Lk)("button",{onClick:e[5]||(e[5]=(...t)=>v.prevPage&&v.prevPage(...t)),disabled:1===f.currentPage},"上一页",8,p),(0,l.Lk)("span",null,"当前页: "+(0,a.v_)(f.currentPage)+" / "+(0,a.v_)(v.totalPages),1),(0,l.Lk)("button",{onClick:e[6]||(e[6]=(...t)=>v.nextPage&&v.nextPage(...t)),disabled:f.currentPage===v.totalPages},"下一页",8,g)]),(0,l.Lk)("div",b,[(0,l.bF)(L,{data:v.chartData,options:f.chartOptions},null,8,["data","options"])]),e[15]||(e[15]=(0,l.eW)(" Github "))],64)}r(4114);var f=r(1010),v=r(6912),L=JSON.parse('{"凯茜娅-朝翼":[1,0,0,0.06,0,0,0,0,0],"preset2":[0.3,0.2,0.1,0.1,0.05,0.1,0.05,0.05,0.05],"preset3":[0.05,0.1,0.2,0.15,0.1,0.1,0.1,0.05,0.05]}');v.t1.register(v.hE,v.m_,v.s$,v.No,v.PP,v.kc,v.FN);var m={components:{LineChart:f.N1},data(){return{standardValues:[10,10,10,106,5.3,10.6,19.3,14.1,14.1],weights:Array(9).fill(0),weightsUsed:Array(9).fill(0),weightsStep:["0.1","0.1","0.1","0.01","0.1","0.1","0.1","0.1","0.1"],weightsName:["攻击力%","生命值%","防御力%","同调","暴击%","暴伤%","技能急速","常规能量%","爆发能量%"],ptarget:.5,objects:[],displayedObjects:[],presetOptions:L,selectedPreset:"",currentPage:1,pageSize:20,chartOptions:{responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"linear",min:0,max:1e4,title:{display:!0,text:"期望体力"}},y:{title:{display:!0,text:"折算总分"}}}}}},created(){this.generateObjects()},mounted(){},computed:{totalPages(){return Math.ceil(this.displayedObjects.length/this.pageSize)},paginatedObjects(){const t=(this.currentPage-1)*this.pageSize,e=t+this.pageSize;return this.displayedObjects.slice(t,e)},chartData(){return{labels:[],datasets:[{label:"最低折算分对应投入体力期望",backgroundColor:"#42A5F5",borderColor:"#1E88E5",data:this.displayedObjects.map((t=>({x:t.expectres,y:t.totalScore})))}]}}},methods:{generateObjects(){const t=this.standardValues,e=t.length,r=this.getCombinations(e,2),n=[1,.85,.7,.55,.4];r.forEach((([e,r])=>{n.forEach((l=>{n.forEach((n=>{const a={attr1:0,attr2:0,attr3:0,attr4:0,attr5:0,attr6:0,attr7:0,attr8:0,attr9:0,totalScore:0,rank:0,prob:0,expectres:0};a[`attr${e+1}`]=t[e]*l,a[`attr${r+1}`]=t[r]*n,this.objects.push(a)}))}))}))},getCombinations(t,e){const r=[],n=Array(e).fill(0).map(((t,e)=>e));while(n[0]<t-e+1){r.push([...n]);let l=e-1;while(l>=0&&n[l]===t-e+l)l--;if(!(l>=0))break;n[l]++;for(let t=l+1;t<e;t++)n[t]=n[t-1]+1}return r},clearWeight(){for(let t=1;t<=9;t++)this.weights[t-1]=0;this.displayedObjects=[]},loadPreset(){this.selectedPreset&&this.presetOptions[this.selectedPreset]?this.weights=[...this.presetOptions[this.selectedPreset]]:alert("请选择一个有效的预设选项！")},calculateAndSort(){this.objects.forEach((t=>{t.totalScore=0;for(let e=1;e<=9;e++){const r=t[`attr${e}`],n=this.weights[e-1];this.weightsUsed[e-1]=n,t.totalScore+=r*n}})),this.objects.sort(((t,e)=>e.totalScore-t.totalScore));let t=1,e=null,r=1/900;this.objects.forEach((n=>{n.prob=r,n.expectres=100/r,r+=1/900,n.totalScore!==e?(n.rank=t,t++,e=n.totalScore):n.rank=t-1})),this.displayedObjects=this.objects.filter(((t,e,r)=>(899===e||t.totalScore!==r[e+1].totalScore)&&t.rank<=90))},getFilteredAttributes(t){const e=[];for(let r=1;r<=9;r++){const n=t[`attr${r}`],l=this.weightsUsed[r-1];0!==n&&0!==l&&e.push(`${this.weightsName[r-1]}:${n.toFixed(1)}`)}return e.length<2&&e.push("其他"),e},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}}},P=r(1241);const y=(0,P.A)(m,[["render",k]]);var O=y;(0,n.Ef)(O).mount("#app")}},e={};function r(n){var l=e[n];if(void 0!==l)return l.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}r.m=t,function(){var t=[];r.O=function(e,n,l,a){if(!n){var i=1/0;for(c=0;c<t.length;c++){n=t[c][0],l=t[c][1],a=t[c][2];for(var o=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(r.O).every((function(t){return r.O[t](n[s])}))?n.splice(s--,1):(o=!1,a<i&&(i=a));if(o){t.splice(c--,1);var u=l();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[n,l,a]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var l,a,i=n[0],o=n[1],s=n[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(l in o)r.o(o,l)&&(r.m[l]=o[l]);if(s)var c=s(r)}for(e&&e(n);u<i.length;u++)a=i[u],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(c)},n=self["webpackChunkcbjq_hq"]=self["webpackChunkcbjq_hq"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504],(function(){return r(7127)}));n=r.O(n)})();
//# sourceMappingURL=app.eb0fe5a4.js.map