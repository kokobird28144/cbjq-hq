(function(){"use strict";var t={9661:function(t,e,r){var s=r(5130),i=r(6768),l=r(4232);const n={id:"app"},a={class:"input-grid"},o=["for"],c=["id","onUpdate:modelValue","step"],u={class:"button-grid"},h=["value"],d={class:"pagination"},p=["disabled"],g=["disabled"],b={class:"chart-container"};function k(t,e,r,k,f,v){const L=(0,i.g2)("line-chart");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",n,[e[13]||(e[13]=(0,i.Lk)("h1",null,"尘白禁区后勤词条折算总分刷取计算器",-1)),e[14]||(e[14]=(0,i.Lk)("hr",null,null,-1)),(0,i.Lk)("div",a,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(f.weights,((t,r)=>((0,i.uX)(),(0,i.CE)("div",{key:r},[(0,i.Lk)("label",{for:"weight"+(r+1)},(0,l.v_)(f.standardValues[r])+(0,l.v_)(f.weightsName[r])+"=",9,o),(0,i.bo)((0,i.Lk)("input",{id:"weight"+(r+1),type:"number","onUpdate:modelValue":t=>f.weights[r]=t,step:f.weightsStep[r],min:"0",style:{width:"50px"}},null,8,c),[[s.Jo,f.weights[r],void 0,{number:!0}]]),e[8]||(e[8]=(0,i.Lk)("label",null,"分",-1))])))),128))]),(0,i.Lk)("div",u,[(0,i.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>v.calculateAndSort&&v.calculateAndSort(...t))},"计算总分并排序"),(0,i.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>v.clearWeight&&v.clearWeight(...t))},"重置分数"),(0,i.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>v.toggleDescription&&v.toggleDescription(...t))},(0,l.v_)(f.showDescription?"隐藏说明":"显示说明"),1),(0,i.bo)((0,i.Lk)("select",{onChange:e[3]||(e[3]=(...t)=>v.loadPreset&&v.loadPreset(...t)),"onUpdate:modelValue":e[4]||(e[4]=t=>f.selectedPreset=t)},[e[9]||(e[9]=(0,i.Lk)("option",{value:"",disabled:""},"选择预设",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(f.presetOptions,((t,e)=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,l.v_)(e),9,h)))),128))],544),[[s.u1,f.selectedPreset]]),(0,i.Lk)("div",null,[e[10]||(e[10]=(0,i.Lk)("label",null,"目标成功概率 ",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=t=>f.ptarget=t),step:.1,min:"0",max:"1",style:{width:"50px"}},null,512),[[s.Jo,f.ptarget,void 0,{number:!0}]])])]),(0,i.bo)((0,i.Lk)("div",null,e[11]||(e[11]=[(0,i.Fv)("<ul><li>假定词条种类和档位的抽取是等概率完全随机的，不存在保底等特殊机制。不考虑第三词条。</li><li>预设配置仅供参考。实际战斗环境不同或关注的角色不同，折算分数可能发生变化，可按实际需求调整。</li><li>“出货率”表示获得1个后勤时其属性在<b>该档位及以上</b>的概率。</li><li>“出货期望体力”根据<b>获取1个限定后勤100体力</b>，乘以出货期望次数 (1/p)得到。</li><li>“目标成功概率”表示<b>希望有多少概率能够达成目标</b>，根据 log(1-p成功)/log(1-p) 计算概率得到表中最后一列。</li><li>由于官方表示后勤刷取将要优化，所以暂时不考虑进一步开发更多功能了。</li></ul>",1)]),512),[[s.aG,f.showDescription]]),e[15]||(e[15]=(0,i.Lk)("hr",null,null,-1)),(0,i.Lk)("table",null,[e[12]||(e[12]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"排位"),(0,i.Lk)("th",null,"属性"),(0,i.Lk)("th",null,"折算总分"),(0,i.Lk)("th",null,"出货率"),(0,i.Lk)("th",null,"出货期望体力"),(0,i.Lk)("th",null,"达到目标概率所需体力")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(v.paginatedObjects,((t,e)=>((0,i.uX)(),(0,i.CE)("tr",{key:e},[(0,i.Lk)("td",null,(0,l.v_)(t.rank),1),(0,i.Lk)("td",null,(0,l.v_)(v.getFilteredAttributes(t).join(", ")),1),(0,i.Lk)("td",null,(0,l.v_)(t.totalScore.toFixed(2)),1),(0,i.Lk)("td",null,(0,l.v_)(t.prob.toFixed(3)),1),(0,i.Lk)("td",null,(0,l.v_)(t.expectres.toFixed(0)),1),(0,i.Lk)("td",null,(0,l.v_)(t.successres.toFixed(0)),1)])))),128))])]),(0,i.Lk)("div",d,[(0,i.Lk)("button",{onClick:e[6]||(e[6]=(...t)=>v.prevPage&&v.prevPage(...t)),disabled:1===f.currentPage},"上一页",8,p),(0,i.Lk)("span",null,"当前页: "+(0,l.v_)(f.currentPage)+" / "+(0,l.v_)(v.totalPages),1),(0,i.Lk)("button",{onClick:e[7]||(e[7]=(...t)=>v.nextPage&&v.nextPage(...t)),disabled:f.currentPage===v.totalPages},"下一页",8,g)]),(0,i.Lk)("div",b,[(0,i.bF)(L,{data:v.chartData,options:f.chartOptions},null,8,["data","options"])])]),e[16]||(e[16]=(0,i.Lk)("footer",null,[(0,i.Lk)("a",{class:"Github",href:"https://github.com/kokobird28144/cbjq-hq",target:"_blank",title:"GitHub Repository"}," Github ")],-1))],64)}r(4114);var f=r(1010),v=r(6912),L=JSON.parse('{"凯茜娅-朝翼":[10,0,0,6.36,0,0,0,0,0],"瑟瑞斯-瞬刻":[7.28,10,0,7.72,0,0,5,0,0],"琴诺-悖谬":[10,0,0,4,0,0,0,0,0]}');v.t1.register(v.hE,v.m_,v.s$,v.No,v.PP,v.kc,v.FN);var y={components:{LineChart:f.N1},data(){return{standardValues:[10,10,10,106,5.3,10.6,19.3,14.1,14.1],weights:Array(9).fill(0),weightsUsed:Array(9).fill(0),weightsStep:["1","1","1","1","1","1","1","1","1"],weightsName:["攻击力%","生命值%","防御力%","同调","暴击%","暴伤%","技能急速","常规能量%","爆发能量%"],ptarget:.7,objects:[],displayedObjects:[],presetOptions:L,selectedPreset:"",currentPage:1,pageSize:20,showDescription:!0,chartOptions:{responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"linear",min:0,max:1e4,title:{display:!0,text:"体力"}},y:{title:{display:!0,text:"折算总分"}}}}}},created(){this.generateObjects()},mounted(){},computed:{totalPages(){return Math.ceil(this.displayedObjects.length/this.pageSize)},paginatedObjects(){const t=(this.currentPage-1)*this.pageSize,e=t+this.pageSize;return this.displayedObjects.slice(t,e)},chartData(){return{labels:[],datasets:[{label:"折算总分-出货期望体力",backgroundColor:"#42A5F5",borderColor:"#1E88E5",data:this.displayedObjects.map((t=>({x:t.expectres,y:t.totalScore})))},{label:"折算总分-达到目标概率所需体力",backgroundColor:"#F5AB00",borderColor:"#c4860d",data:this.displayedObjects.map((t=>({x:t.successres,y:t.totalScore})))}]}}},methods:{generateObjects(){const t=this.standardValues,e=t.length,r=this.getCombinations(e,2),s=[1,.85,.7,.55,.4];r.forEach((([e,r])=>{s.forEach((i=>{s.forEach((s=>{const l={attr1:0,attr2:0,attr3:0,attr4:0,attr5:0,attr6:0,attr7:0,attr8:0,attr9:0,attrscore:[0,0,0,0,0,0,0,0,0],totalScore:0,rank:0,prob:0,expectres:0,successres:0};l[`attr${e+1}`]=t[e]*i,l[`attr${r+1}`]=t[r]*s,this.objects.push(l)}))}))}))},getCombinations(t,e){const r=[],s=Array(e).fill(0).map(((t,e)=>e));while(s[0]<t-e+1){r.push([...s]);let i=e-1;while(i>=0&&s[i]===t-e+i)i--;if(!(i>=0))break;s[i]++;for(let t=i+1;t<e;t++)s[t]=s[t-1]+1}return r},clearWeight(){for(let t=1;t<=9;t++)this.weights[t-1]=0;this.displayedObjects=[],this.currentPage=1,this.selectedPreset=""},loadPreset(){this.selectedPreset&&this.presetOptions[this.selectedPreset]?this.weights=[...this.presetOptions[this.selectedPreset]]:alert("请选择一个有效的预设选项！")},calculateAndSort(){this.objects.forEach((t=>{t.totalScore=0;for(let e=1;e<=9;e++){const r=t[`attr${e}`],s=this.weights[e-1];this.weightsUsed[e-1]=s,t.attrscore[e-1]=r*s/this.standardValues[e-1],t.totalScore+=t.attrscore[e-1]}})),this.objects.sort(((t,e)=>e.totalScore-t.totalScore));let t=1,e=-1,r=1/900,s=[];this.objects.forEach(((i,l,n)=>{i.prob=r,i.expectres=100/r,i.successres=100*Math.log(1-this.ptarget)/Math.log(1-r),Math.abs(i.totalScore-e)>1e-6?(i.rank=t,t++,e=i.totalScore,s.forEach((t=>{n[t].prob=n[l-1].prob,n[t].expectres=n[l-1].expectres,n[t].successres=n[l-1].successres})),s=[l]):(i.rank=t-1,s.push(l)),r+=1/900})),this.displayedObjects=this.objects.filter(((t,e,r)=>899===e||(t.totalScore!==r[e+1].totalScore||JSON.stringify(t.attrscore)!==JSON.stringify(r[e+1].attrscore)))),this.currentPage=1},getFilteredAttributes(t){const e=[];for(let r=1;r<=9;r++){const s=t[`attr${r}`],i=this.weightsUsed[r-1];0!==s&&0!==i&&e.push(`${s.toFixed(1)}${this.weightsName[r-1]}`)}return e.length<2&&e.push("无效词条"),e},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},toggleDescription(){this.showDescription=!this.showDescription}}},P=r(1241);const w=(0,P.A)(y,[["render",k]]);var m=w;(0,s.Ef)(m).mount("#app")}},e={};function r(s){var i=e[s];if(void 0!==i)return i.exports;var l=e[s]={exports:{}};return t[s].call(l.exports,l,l.exports,r),l.exports}r.m=t,function(){var t=[];r.O=function(e,s,i,l){if(!s){var n=1/0;for(u=0;u<t.length;u++){s=t[u][0],i=t[u][1],l=t[u][2];for(var a=!0,o=0;o<s.length;o++)(!1&l||n>=l)&&Object.keys(r.O).every((function(t){return r.O[t](s[o])}))?s.splice(o--,1):(a=!1,l<n&&(n=l));if(a){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}l=l||0;for(var u=t.length;u>0&&t[u-1][2]>l;u--)t[u]=t[u-1];t[u]=[s,i,l]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,l,n=s[0],a=s[1],o=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(o)var u=o(r)}for(e&&e(s);c<n.length;c++)l=n[c],r.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return r.O(u)},s=self["webpackChunkcbjq_hq"]=self["webpackChunkcbjq_hq"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=r.O(void 0,[504],(function(){return r(9661)}));s=r.O(s)})();
//# sourceMappingURL=app.0184356a.js.map